<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="book">
	<select id="totalCountBook" resultType="_int">
		select count(*) as cnt 
			from SELECT * 
				from book where rowid in (select max(rowid) from book group by book_name)
	</select>
	<select id="selectBookAllPage" parameterType="map" resultType="book">
	select * from 
		(select rownum as rnum, n.* from
			(select * from 
				(select rownum as rnum, n.* from 
					(SELECT 
						book_no as bookNo, book_name as bookName, book_writer as bookWriter,
						book_publisher as bookPublisher, book_categroy as bookCategory,
						book_img as bookImg, book_pub_date as bookPubDate,
						book_status as bookStatus, book_content as bookContent
					from book where rowid in (select max(rowid) from book group by book_name) order by BOOK_NO desc)n) 
					where rnum BETWEEN #{start} and #{end}) n) 
	where rnum BETWEEN #{start} and #{end}
</select>
</mapper>
