<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<select id="selectMember" parameterType="map" resultType="member">
		select * from 
			(select rownum as rnum, n.* from
				(select
			member_no as memberNo,
			member_id as memberId,
			member_pw as memberPw,
			member_name as memberName,
			member_email as memberEmail,
			member_phone as memberPhone,
			enroll_date as enrollDate,
			member_nickname as memberNickname
		from member order by member_no desc)n)
		where rnum between #{start} and #{end}
	</select>
	<select id="memberTotalCount" resultType="_int">
		select count(*) as cnt from member
	</select>
	<select id="selectMemberTotalCount" parameterType="map" resultType="_int">	
	select count(*) as cnt from member where
		<if test = "selectColumn.equals('member_id')">
			member_id like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_name')">
			member_name like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_email')">
			member_email like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_nickname')">
			member_nickname like '%' || #{search} || '%'
		</if>
	</select>
	<select id="selectMemberList" parameterType="map" resultType="member">
		select * from 
			(select rownum as rnum, n.* from
				(select
			member_no as memberNo,
			member_id as memberId,
			member_pw as memberPw,
			member_name as memberName,
			member_email as memberEmail,
			member_phone as memberPhone,
			enroll_date as enrollDate,
			member_nickname as memberNickname
		from member where
		<if test = "selectColumn.equals('member_id')">
			member_id like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_name')">
			member_name like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_email')">
			member_email like '%' || #{search} || '%'
		</if>
		<if test = "selectColumn.equals('member_nickname')">
			member_nickname like '%' || #{search} || '%'
		</if>
		order by member_no desc)n)
		where rnum between #{start} and #{end}
	</select>
</mapper>
