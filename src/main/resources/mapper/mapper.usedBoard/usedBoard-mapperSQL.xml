<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="usedBoard">
<select id="selectListCount" resultType="_int">
select count(*) from used_board
</select>
<select id="selectAllList" parameterType="map" resultType="usedBoard">
	select
		used_no as usedNo,
		member_id as memberId,
		used_type as usedType,
		used_title as usedTitle,
		used_content as usedContent,
		used_date as usedDate,
		used_status as usedStatus,
		used_info as usedInfo,
		used_pw as usedPw,
		read_count as readCount
		 from
		(select ROWNUM as rnum, u.* from
		(select * from used_board order by used_no desc)u
		)
		where rnum between #{start} and #{end}
</select>
<insert id="insertBoard" parameterType="usedBoard">
insert into used_board values(used_board_seq.nextval,#{memberId},#{usedType},#{usedTitle},#{usedContent},default,default,#{usedInfo},#{usedPw},default)
</insert>
<select id="checkUsedPw" parameterType="usedBoard" resultType="usedBoard">
select used_title as usedTitle,
		member_id as memberId from used_board where used_no=#{usedNo} and used_pw=#{usedPw}
</select>
<select id="selectOneBoard" parameterType="_int" resultType="usedBoard">
	select
		used_no as usedNo,
		member_id as memberId,
		used_type as usedType,
		used_title as usedTitle,
		used_content as usedContent,
		used_date as usedDate,
		used_status as usedStatus,
		used_info as usedInfo,
		used_pw as usedPw,
		read_count as readCount
		 from used_board where used_no=#{_parameter}
</select>

<update id="updateReadCount" parameterType="_int">
update used_board set read_count = read_count+1 where used_no=#{_parameter}
</update>
<delete id="deleteBoard" parameterType="_int">
delete from used_board where used_no=#{_parameter}
</delete>
<insert id="insertComment" parameterType="usedComment">
insert into used_comment values(comment_seq.nextval,#{usedNo},#{commentContent},#{commentWriter},sysdate)
</insert>
<insert id="insertFiles" parameterType="usedFiles">
insert into used_files values(comment_seq.currval,#{commentFilename},#{commentFilepath})
</insert>
</mapper>
